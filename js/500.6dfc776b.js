"use strict";(self["webpackChunkbro_lottery"]=self["webpackChunkbro_lottery"]||[]).push([[500],{22500:function(a,e,s){s.r(e),s.d(e,{default:function(){return W}});var t=s(56768),d=s(90144),i=s(24232),n=s(45130),l=s(55129),v=s(78875);const b={class:"modal_content"},o={class:"data"},c={class:"bg"},u={class:"field"};var r={__name:"LoginModal",setup(a){(0,l.o)();const e=(0,t.WQ)("emitter"),s=(0,v.hN)(),r=(0,d.KR)(!1),p=(0,d.KR)("");function h(){r.value=!0,setTimeout((()=>{e.emit("hide_login_modal")}),200)}async function g(){try{h()}catch(a){console.error("LoginModal.vue:",a),s.notify({group:"default",speed:200,duration:1e3,title:"Invalid token",type:"error"})}}return(a,e)=>((0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("section",{class:(0,i.C4)(["modal",{closing:r.value}])},[(0,t.Lk)("div",b,[(0,t.Lk)("div",o,[e[3]||(e[3]=(0,t.Lk)("div",{class:"modal_title"},[(0,t.Lk)("span",null,"Admin"),(0,t.Lk)("span",null,"Admin")],-1)),e[4]||(e[4]=(0,t.Lk)("div",{class:"title"},"Log In",-1)),(0,t.Lk)("div",c,[(0,t.Lk)("div",u,[(0,t.bo)((0,t.Lk)("input",{type:"password",class:"input","onUpdate:modelValue":e[0]||(e[0]=a=>p.value=a),placeholder:"Password"},null,512),[[n.Jo,p.value]])])]),(0,t.Lk)("button",{class:"btn",onClick:e[1]||(e[1]=(0,n.D$)((a=>g()),["prevent"]))},e[2]||(e[2]=[(0,t.Lk)("span",null,"Log in",-1)])),e[5]||(e[5]=(0,t.Fv)('<div class="bulbs" data-v-22e3c0f0><div class="bulb" data-v-22e3c0f0></div><div class="bulb" data-v-22e3c0f0></div><div class="bulb" data-v-22e3c0f0></div><div class="bulb" data-v-22e3c0f0></div><div class="bulb" data-v-22e3c0f0></div><div class="bulb" data-v-22e3c0f0></div><div class="bulb" data-v-22e3c0f0></div><div class="bulb" data-v-22e3c0f0></div><div class="bulb" data-v-22e3c0f0></div><div class="bulb" data-v-22e3c0f0></div><div class="bulb" data-v-22e3c0f0></div><div class="bulb" data-v-22e3c0f0></div><div class="bulb" data-v-22e3c0f0></div><div class="bulb" data-v-22e3c0f0></div><div class="bulb" data-v-22e3c0f0></div><div class="bulb" data-v-22e3c0f0></div></div>',1))])])],2),(0,t.Lk)("div",{class:(0,i.C4)(["modal_overlay",{closing:r.value}])},null,2)],64))}},p=s(71241);const h=(0,p.A)(r,[["__scopeId","data-v-22e3c0f0"]]);var g=h,f=s(63935);function m(a,e){return(0,t.uX)(),(0,t.CE)("header",null,e[0]||(e[0]=[(0,t.Lk)("div",{class:"cont"},[(0,t.Lk)("div",{class:"logo"},[(0,t.Lk)("img",{src:f,alt:""})])],-1)]))}const k={},R=(0,p.A)(k,[["render",m],["__scopeId","data-v-7a293440"]]);var j=R;s(44114),s(98992),s(54520);function w(){const a={parsePx:a=>parseFloat(a.replace(/px/,"")),getRandomInRange:(a,e,s=0)=>{const t=Math.pow(10,s),d=Math.random()*(e-a)+a;return Math.floor(d*t)/t},getRandomItem:a=>a[Math.floor(Math.random()*a.length)],getScaleFactor:()=>Math.log(window.innerWidth)/Math.log(1920),debounce:(a,e)=>{let s;return(...t)=>{clearTimeout(s),s=setTimeout((()=>a(...t)),e)}}},e=Math.PI/180,s={confettiesNumber:250,confettiRadius:6,confettiColors:["#fcf403","#62fc03","#f4fc03","#03e7fc","#03fca5","#a503fc","#fc03ad","#fc03c2"],emojies:[],svgIcon:null};class t{constructor({initialPosition:s,direction:t,radius:d,colors:i,emojis:n,svgIcon:l}){const v=a.getRandomInRange(.9,1.7,3)*a.getScaleFactor();this.speed={x:v,y:v},this.finalSpeedX=a.getRandomInRange(.2,.6,3),this.rotationSpeed=n.length||l?.01:a.getRandomInRange(.03,.07,3)*a.getScaleFactor(),this.dragCoefficient=a.getRandomInRange(5e-4,9e-4,6),this.radius={x:d,y:d},this.initialRadius=d,this.rotationAngle="left"===t?a.getRandomInRange(0,.2,3):a.getRandomInRange(-.2,0,3),this.emojiRotationAngle=a.getRandomInRange(0,2*Math.PI),this.radiusYDirection="down";const b="left"===t?a.getRandomInRange(82,15)*e:a.getRandomInRange(-15,-82)*e;this.absCos=Math.abs(Math.cos(b)),this.absSin=Math.abs(Math.sin(b));const o=a.getRandomInRange(-150,0),c={x:s.x+("left"===t?-o:o)*this.absCos,y:s.y-o*this.absSin};this.position={...c},this.initialPosition={...c},this.color=n.length||l?null:a.getRandomItem(i),this.emoji=n.length?a.getRandomItem(n):null,this.svgIcon=null,l&&(this.svgImage=new Image,this.svgImage.src=l,this.svgImage.onload=()=>{this.svgIcon=this.svgImage}),this.createdAt=Date.now(),this.direction=t}draw(a){const{x:e,y:s}=this.position,{x:t,y:d}=this.radius,i=window.devicePixelRatio;this.svgIcon?(a.save(),a.translate(i*e,i*s),a.rotate(this.emojiRotationAngle),a.drawImage(this.svgIcon,-t,-d,2*t,2*d),a.restore()):this.color?(a.fillStyle=this.color,a.beginPath(),a.ellipse(e*i,s*i,t*i,d*i,this.rotationAngle,0,2*Math.PI),a.fill()):this.emoji&&(a.font=t*i+"px serif",a.save(),a.translate(i*e,i*s),a.rotate(this.emojiRotationAngle),a.textAlign="center",a.fillText(this.emoji,0,d/2),a.restore())}updatePosition(a,e){const s=e-this.createdAt;this.speed.x>this.finalSpeedX&&(this.speed.x-=this.dragCoefficient*a),this.position.x+=this.speed.x*("left"===this.direction?-this.absCos:this.absCos)*a,this.position.y=this.initialPosition.y-this.speed.y*this.absSin*s+.00125*Math.pow(s,2)/2}isVisible(a){return this.position.y<a+100}}class d{constructor(){this.canvas=document.createElement("canvas"),this.canvas.style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 9; pointer-events: none;",document.querySelector(".data").appendChild(this.canvas),this.context=this.canvas.getContext("2d"),this.confetti=[],this.lastUpdated=Date.now(),window.addEventListener("resize",a.debounce((()=>this.resizeCanvas()),200)),this.resizeCanvas(),requestAnimationFrame((()=>this.loop()))}resizeCanvas(){this.canvas.width=window.innerWidth*window.devicePixelRatio,this.canvas.height=window.innerHeight*window.devicePixelRatio}addConfetti(a={}){const{confettiesNumber:e,confettiRadius:d,confettiColors:i,emojies:n,svgIcon:l}={...s,...a},v=5*window.innerHeight/7;for(let s=0;s<e/2;s++)this.confetti.push(new t({initialPosition:{x:0,y:v},direction:"right",radius:d,colors:i,emojis:n,svgIcon:l})),this.confetti.push(new t({initialPosition:{x:window.innerWidth,y:v},direction:"left",radius:d,colors:i,emojis:n,svgIcon:l}))}resetAndStart(a={}){this.confetti=[],this.addConfetti(a)}loop(){const a=Date.now(),e=a-this.lastUpdated;this.lastUpdated=a,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.confetti=this.confetti.filter((s=>(s.updatePosition(e,a),s.draw(this.context),s.isVisible(this.canvas.height)))),requestAnimationFrame((()=>this.loop()))}}return new d}const I={class:"data"},C={class:"drum"},L={class:"slots"},y={class:"bottom"},x={class:"screen"},_={key:0,class:"start_message"},P={key:1,class:"list"},A={class:"number"},M={key:0},X={class:"fireworks"};var K={__name:"Index",setup(a){const e=(0,l.o)(),s=(0,d.KR)(!1),v=(0,d.KR)(!1),b=(0,d.KR)(!1),o=(0,d.KR)(null),c=(0,d.KR)(1e4),u=3e3,r=[{min:1,max:3,percentage:.3},{min:4,max:6,percentage:.2},{min:7,max:1/0,percentage:.1}],p=(0,d.KR)(null),h=(0,d.KR)([]),g=(0,d.KR)(["shdbsdjcsjdkcnksjdncshdbsdjcsjdkcnksjdncfsvs","shdbsdjcsjdkcnksjdncshdbsdjcsjdkcnksjdncfsvs","shdbsdjcsjdkcnksjdncshdbsdjcsjdkcnksjdncfsvs","shdbsdjcsjdkcnksjdncshdbsdjcsjdkcnksjdncfsvs","shdbsdjcsjdkcnksjdncshdbsdjcsjdkcnksjdncfsvs"]);function f(){s.value=!0,m()}function m(){if(v.value=!0,null===o.value?o.value=1:o.value++,o.value>1){let a=g.value.length;for(let e of r)if(a>=e.min&&a<=e.max){c.value+=c.value*e.percentage;break}}console.log(c.value),setTimeout((()=>{v.value=!1,b.value=!0,p.value.addConfetti(),setTimeout((()=>p.value.addConfetti()),u/2),setTimeout((()=>b.value=!1),u)}),c.value)}return(0,t.sV)((async()=>{p.value=w(),h.value=await e.getLotteryParticipants()})),(a,e)=>((0,t.uX)(),(0,t.CE)("section",I,[(0,t.Lk)("section",{class:(0,i.C4)(["top",{congratulation:b.value}])},[(0,t.Lk)("div",C,[(0,t.Lk)("div",L,[(0,t.Lk)("div",{class:(0,i.C4)(["slot",{animate:v.value}])},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(h.value,((a,e)=>((0,t.uX)(),(0,t.CE)("div",{key:e,class:"option",style:(0,i.Tr)(`-webkit-transform: rotateX(${30*e}deg) translateZ(100px);`)},[(0,t.Lk)("span",null,(0,i.v_)(a),1)],4)))),128))],2)])]),(0,t.Lk)("button",{class:(0,i.C4)(["start_btn",{disabled:o.value===g.value.length||v.value}]),onClick:e[0]||(e[0]=(0,n.D$)((a=>f()),["prevent"]))},"START",2),e[1]||(e[1]=(0,t.Fv)('<div class="bulb bulb1" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb2" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb3" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb4" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb5" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb6" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb7" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb8" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb9" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb10" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb11" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb12" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb13" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb14" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb15" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb16" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb17" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb18" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb19" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb20" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb21" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb22" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb23" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb24" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb25" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb26" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb27" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb28" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb29" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb30" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb31" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb32" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb33" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb34" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb35" data-v-3eedb018><span data-v-3eedb018></span></div><div class="bulb bulb36" data-v-3eedb018><span data-v-3eedb018></span></div>',36))],2),(0,t.Lk)("section",y,[(0,t.Lk)("div",x,[s.value?((0,t.uX)(),(0,t.CE)("div",P,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(g.value.slice(0,o.value),((a,e)=>((0,t.uX)(),(0,t.CE)("div",{key:e},[(0,t.Lk)("span",A,(0,i.v_)(g.value.length-e)+".",1),!v.value||e<o.value-1?((0,t.uX)(),(0,t.CE)("span",M,(0,i.v_)(a),1)):(0,t.Q3)("",!0)])))),128))])):((0,t.uX)(),(0,t.CE)("div",_,e[2]||(e[2]=[(0,t.Lk)("div",{class:"title"},"BROTTERY",-1),(0,t.Lk)("div",{class:"desc"},"Press start",-1)])))])]),(0,t.bo)((0,t.Lk)("section",X,e[3]||(e[3]=[(0,t.Lk)("div",{class:"before"},null,-1),(0,t.Lk)("div",{class:"after"},null,-1)]),512),[[n.aG,b.value]])]))}};const E=(0,p.A)(K,[["__scopeId","data-v-3eedb018"]]);var F=E,S={__name:"AdminPage",setup(a){const e=(0,t.WQ)("emitter"),s=(0,d.KR)("true");return e.on("hide_login_modal",(()=>{s.value=!1})),(a,e)=>((0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(j),s.value?((0,t.uX)(),(0,t.Wv)(g,{key:0})):((0,t.uX)(),(0,t.Wv)(F,{key:1}))],64))}};const T=S;var W=T}}]);
//# sourceMappingURL=500.6dfc776b.js.map