"use strict";(self["webpackChunkbro_lottery"]=self["webpackChunkbro_lottery"]||[]).push([[645],{57645:function(a,t,d){d.r(t),d.d(t,{default:function(){return D}});var s=d(56768),e=d(90144),i=d(24232),n=d(45130),l=d(55129),v=d(78875);const o={class:"modal_content"},b={class:"data"},u={class:"bg"},c={class:"field"};var r={__name:"LoginModal",setup(a){const t=(0,l.o)(),d=(0,s.WQ)("emitter"),r=(0,v.hN)(),p=(0,e.KR)(!1),h=(0,e.KR)("");function g(){p.value=!0,setTimeout((()=>{d.emit("hide_login_modal")}),200)}async function f(){try{localStorage.setItem("x-token",h.value),await t.createLottery(h.value),g()}catch(a){console.error("LoginModal.vue:",a),r.notify({group:"default",speed:200,duration:1e3,title:"Invalid token",type:"error"})}}return(0,s.KC)((()=>{h.value=localStorage.getItem("x-token")})),(a,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("section",{class:(0,i.C4)(["modal",{closing:p.value}])},[(0,s.Lk)("div",o,[(0,s.Lk)("div",b,[t[3]||(t[3]=(0,s.Lk)("div",{class:"modal_title"},[(0,s.Lk)("span",null,"Admin"),(0,s.Lk)("span",null,"Admin")],-1)),t[4]||(t[4]=(0,s.Lk)("div",{class:"title"},"Log In",-1)),(0,s.Lk)("div",u,[(0,s.Lk)("div",c,[(0,s.bo)((0,s.Lk)("input",{type:"password",class:"input","onUpdate:modelValue":t[0]||(t[0]=a=>h.value=a),placeholder:"Password"},null,512),[[n.Jo,h.value]])])]),(0,s.Lk)("button",{class:"btn",onClick:t[1]||(t[1]=(0,n.D$)((a=>f()),["prevent"]))},t[2]||(t[2]=[(0,s.Lk)("span",null,"Log in",-1)])),t[5]||(t[5]=(0,s.Fv)('<div class="bulbs" data-v-20daf391><div class="bulb" data-v-20daf391></div><div class="bulb" data-v-20daf391></div><div class="bulb" data-v-20daf391></div><div class="bulb" data-v-20daf391></div><div class="bulb" data-v-20daf391></div><div class="bulb" data-v-20daf391></div><div class="bulb" data-v-20daf391></div><div class="bulb" data-v-20daf391></div><div class="bulb" data-v-20daf391></div><div class="bulb" data-v-20daf391></div><div class="bulb" data-v-20daf391></div><div class="bulb" data-v-20daf391></div><div class="bulb" data-v-20daf391></div><div class="bulb" data-v-20daf391></div><div class="bulb" data-v-20daf391></div><div class="bulb" data-v-20daf391></div></div>',1))])])],2),(0,s.Lk)("div",{class:(0,i.C4)(["modal_overlay",{closing:p.value}])},null,2)],64))}},p=d(71241);const h=(0,p.A)(r,[["__scopeId","data-v-20daf391"]]);var g=h,f=d(63935);function m(a,t){return(0,s.uX)(),(0,s.CE)("header",null,t[0]||(t[0]=[(0,s.Lk)("div",{class:"cont"},[(0,s.Lk)("div",{class:"logo"},[(0,s.Lk)("img",{src:f,alt:""})])],-1)]))}const k={},R=(0,p.A)(k,[["render",m],["__scopeId","data-v-7a293440"]]);var I=R;d(44114),d(98992),d(54520);function w(){const a={parsePx:a=>parseFloat(a.replace(/px/,"")),getRandomInRange:(a,t,d=0)=>{const s=Math.pow(10,d),e=Math.random()*(t-a)+a;return Math.floor(e*s)/s},getRandomItem:a=>a[Math.floor(Math.random()*a.length)],getScaleFactor:()=>Math.log(window.innerWidth)/Math.log(1920),debounce:(a,t)=>{let d;return(...s)=>{clearTimeout(d),d=setTimeout((()=>a(...s)),t)}}},t=Math.PI/180,d={confettiesNumber:250,confettiRadius:6,confettiColors:["#fcf403","#62fc03","#f4fc03","#03e7fc","#03fca5","#a503fc","#fc03ad","#fc03c2"],emojies:[],svgIcon:null};class s{constructor({initialPosition:d,direction:s,radius:e,colors:i,emojis:n,svgIcon:l}){const v=a.getRandomInRange(.9,1.7,3)*a.getScaleFactor();this.speed={x:v,y:v},this.finalSpeedX=a.getRandomInRange(.2,.6,3),this.rotationSpeed=n.length||l?.01:a.getRandomInRange(.03,.07,3)*a.getScaleFactor(),this.dragCoefficient=a.getRandomInRange(5e-4,9e-4,6),this.radius={x:e,y:e},this.initialRadius=e,this.rotationAngle="left"===s?a.getRandomInRange(0,.2,3):a.getRandomInRange(-.2,0,3),this.emojiRotationAngle=a.getRandomInRange(0,2*Math.PI),this.radiusYDirection="down";const o="left"===s?a.getRandomInRange(82,15)*t:a.getRandomInRange(-15,-82)*t;this.absCos=Math.abs(Math.cos(o)),this.absSin=Math.abs(Math.sin(o));const b=a.getRandomInRange(-150,0),u={x:d.x+("left"===s?-b:b)*this.absCos,y:d.y-b*this.absSin};this.position={...u},this.initialPosition={...u},this.color=n.length||l?null:a.getRandomItem(i),this.emoji=n.length?a.getRandomItem(n):null,this.svgIcon=null,l&&(this.svgImage=new Image,this.svgImage.src=l,this.svgImage.onload=()=>{this.svgIcon=this.svgImage}),this.createdAt=Date.now(),this.direction=s}draw(a){const{x:t,y:d}=this.position,{x:s,y:e}=this.radius,i=window.devicePixelRatio;this.svgIcon?(a.save(),a.translate(i*t,i*d),a.rotate(this.emojiRotationAngle),a.drawImage(this.svgIcon,-s,-e,2*s,2*e),a.restore()):this.color?(a.fillStyle=this.color,a.beginPath(),a.ellipse(t*i,d*i,s*i,e*i,this.rotationAngle,0,2*Math.PI),a.fill()):this.emoji&&(a.font=s*i+"px serif",a.save(),a.translate(i*t,i*d),a.rotate(this.emojiRotationAngle),a.textAlign="center",a.fillText(this.emoji,0,e/2),a.restore())}updatePosition(a,t){const d=t-this.createdAt;this.speed.x>this.finalSpeedX&&(this.speed.x-=this.dragCoefficient*a),this.position.x+=this.speed.x*("left"===this.direction?-this.absCos:this.absCos)*a,this.position.y=this.initialPosition.y-this.speed.y*this.absSin*d+.00125*Math.pow(d,2)/2}isVisible(a){return this.position.y<a+100}}class e{constructor(){this.canvas=document.createElement("canvas"),this.canvas.style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 9; pointer-events: none;",document.querySelector(".data").appendChild(this.canvas),this.context=this.canvas.getContext("2d"),this.confetti=[],this.lastUpdated=Date.now(),window.addEventListener("resize",a.debounce((()=>this.resizeCanvas()),200)),this.resizeCanvas(),requestAnimationFrame((()=>this.loop()))}resizeCanvas(){this.canvas.width=window.innerWidth*window.devicePixelRatio,this.canvas.height=window.innerHeight*window.devicePixelRatio}addConfetti(a={}){const{confettiesNumber:t,confettiRadius:e,confettiColors:i,emojies:n,svgIcon:l}={...d,...a},v=5*window.innerHeight/7;for(let d=0;d<t/2;d++)this.confetti.push(new s({initialPosition:{x:0,y:v},direction:"right",radius:e,colors:i,emojis:n,svgIcon:l})),this.confetti.push(new s({initialPosition:{x:window.innerWidth,y:v},direction:"left",radius:e,colors:i,emojis:n,svgIcon:l}))}resetAndStart(a={}){this.confetti=[],this.addConfetti(a)}loop(){const a=Date.now(),t=a-this.lastUpdated;this.lastUpdated=a,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.confetti=this.confetti.filter((d=>(d.updatePosition(t,a),d.draw(this.context),d.isVisible(this.canvas.height)))),requestAnimationFrame((()=>this.loop()))}}return new e}const C={class:"data"},L={class:"drum"},y={class:"slots"},x={class:"bottom"},_={class:"screen"},P={key:0,class:"start_message"},A={key:1,class:"list"},M={key:0},X={key:2,class:"congratulations"},K={class:"address"},E={class:"fireworks"};var S={__name:"Index",setup(a){const t=(0,l.o)(),d=(0,e.KR)(!1),v=(0,e.KR)(!1),o=(0,e.KR)(!1),b=(0,e.KR)(null),u=(0,e.KR)(null),c=(0,e.KR)(1e4),r=3e3,p=[{min:1,max:3,percentage:.3},{min:4,max:6,percentage:.2},{min:7,max:1/0,percentage:.1}],h=(0,e.KR)(null),g=(0,e.KR)([]);function f(){return 360/g.value.length}function m(){const a=f(),t=a*Math.PI/180;return 56/t}function k(){d.value=!0,v.value=!0,R()}function R(){null===u.value?u.value=t.adminWinners.length:u.value=u.value-1;const a=g.value.indexOf(t.adminWinners[u.value-1]),d=a*f();if(u.value<t.adminWinners.length){let a=t.adminWinners.length;for(let t of p)if(a>=t.min&&a<=t.max){c.value+=c.value*t.percentage;break}}setTimeout((()=>{v.value=!1,b.value.style.transform=`rotateX(${360-d}deg)`,o.value=!0,h.value.addConfetti(),setTimeout((()=>h.value.addConfetti()),r/2),setTimeout((()=>o.value=!1),r)}),c.value)}return(0,s.sV)((async()=>{h.value=w(),g.value=await t.getLotteryParticipants()})),(a,l)=>((0,s.uX)(),(0,s.CE)("section",C,[(0,s.Lk)("section",{class:(0,i.C4)(["top",{congratulation:o.value}])},[(0,s.Lk)("div",L,[(0,s.Lk)("div",y,[(0,s.Lk)("div",{class:(0,i.C4)(["slot",{animate:v.value}]),ref_key:"slot",ref:b},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(g.value,((a,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"option",style:(0,i.Tr)(`-webkit-transform: rotateX(${t*f()}deg) translateZ(${m()}px);`)},[(0,s.Lk)("span",null,(0,i.v_)(a),1)],4)))),128))],2)])]),(0,s.Lk)("button",{class:(0,i.C4)(["start_btn",{disabled:1===u.value||v.value}]),onClick:l[0]||(l[0]=(0,n.D$)((a=>k()),["prevent"]))},"START",2),l[1]||(l[1]=(0,s.Fv)('<div class="bulb bulb1" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb2" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb3" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb4" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb5" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb6" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb7" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb8" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb9" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb10" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb11" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb12" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb13" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb14" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb15" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb16" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb17" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb18" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb19" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb20" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb21" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb22" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb23" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb24" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb25" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb26" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb27" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb28" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb29" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb30" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb31" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb32" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb33" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb34" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb35" data-v-a9dbdea2><span data-v-a9dbdea2></span></div><div class="bulb bulb36" data-v-a9dbdea2><span data-v-a9dbdea2></span></div>',36))],2),(0,s.Lk)("section",x,[(0,s.Lk)("div",_,[d.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",P,l[2]||(l[2]=[(0,s.Lk)("div",{class:"title"},"BROTTERY",-1),(0,s.Lk)("div",{class:"desc"},"Press start",-1)]))),d.value&&!o.value?((0,s.uX)(),(0,s.CE)("div",A,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,e.R1)(t).adminWinners,((a,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t},[v.value&&t+1>u.value||!v.value&&t+1>=u.value?((0,s.uX)(),(0,s.CE)("span",M,(0,i.v_)(a),1)):(0,s.Q3)("",!0)])))),128))])):(0,s.Q3)("",!0),o.value?((0,s.uX)(),(0,s.CE)("div",X,[l[3]||(l[3]=(0,s.Lk)("div",{class:"title"},"Congratulations",-1)),(0,s.Lk)("div",K,(0,i.v_)((0,e.R1)(t).adminWinners[u.value-1]),1)])):(0,s.Q3)("",!0)])]),(0,s.bo)((0,s.Lk)("section",E,l[4]||(l[4]=[(0,s.Lk)("div",{class:"before"},null,-1),(0,s.Lk)("div",{class:"after"},null,-1)]),512),[[n.aG,o.value]])]))}};const F=(0,p.A)(S,[["__scopeId","data-v-a9dbdea2"]]);var W=F,T={__name:"AdminPage",setup(a){const t=(0,s.WQ)("emitter"),d=(0,e.KR)("true");return t.on("hide_login_modal",(()=>{d.value=!1})),(a,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(I),d.value?((0,s.uX)(),(0,s.Wv)(g,{key:0})):((0,s.uX)(),(0,s.Wv)(W,{key:1}))],64))}};const j=T;var D=j}}]);
//# sourceMappingURL=645.9c47cef2.js.map