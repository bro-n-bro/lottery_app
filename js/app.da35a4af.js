(function(){var e={22827:function(e,t,r){"use strict";var n=r(45130),o=r(30657),a=r(56768),i=r(14340),s=r(81387),c=r(51510),l={__name:"App",setup(e){(0,i.o)();const t=(0,s.lq)(),r=(0,c.K7Q)(),n=(0,a.EW)((()=>t.meta.layout||"default-layout"));return(0,a.KC)((async()=>{r.value="Bro_n_Bro lottery",window.addEventListener("keplr_keystorechange",(()=>{window.location.reload()}))})),(e,t)=>{const r=(0,a.g2)("notifications");return(0,a.uX)(),(0,a.CE)(a.FK,null,[((0,a.uX)(),(0,a.Wv)((0,a.$y)(n.value))),(0,a.bF)(r,{width:"280px",position:"top left",group:"default"},{body:(0,a.k6)((e=>t[0]||(t[0]=[(0,a.Lk)("div",{class:"notification"},null,-1)]))),_:1})],64)}}};const u=l;var d=u,f=(r(98992),r(37550),r(3949),r(90144)),h=r(24232),p=r.p+"img/logo.2c926337.svg";const v={class:"cont row"},b={class:"balance"},w={class:"staked"},g={class:"val"},C={class:"tickets"},m={class:"address"};var y={__name:"Header",setup(e){const t=(0,i.o)();async function r(){try{t.isKeplrConnecting=!0,await t.connectKeplr(),t.isKeplrConnecting=!1}catch(error){console.error("Error connecting to Keplr:",error),t.isKeplrConnecting=!1}}return(0,a.sV)((()=>{const e=document.querySelectorAll(".scroll_btn");e&&e.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();let r=e.getAttribute("data-anchor");document.getElementById(r).scrollIntoView({behavior:"smooth",block:"start"},1e3)}))}))})),(e,o)=>((0,a.uX)(),(0,a.CE)("header",null,[(0,a.Lk)("div",v,[o[5]||(o[5]=(0,a.Fv)('<div class="logo" data-v-c0707db4><img src="'+p+'" alt="" data-v-c0707db4></div><div class="menu" data-v-c0707db4><div data-v-c0707db4><button class="btn scroll_btn" data-anchor="first_section" data-v-c0707db4>Lottery</button></div><div data-v-c0707db4><button class="btn scroll_btn" data-anchor="prize_pool" data-v-c0707db4>Prize pool</button></div><div data-v-c0707db4><button class="btn scroll_btn" data-anchor="leaderboard" data-v-c0707db4>Leaderboard</button></div><div data-v-c0707db4><button class="btn scroll_btn" data-anchor="our_bros" data-v-c0707db4>Bros</button></div><div data-v-c0707db4><button class="btn scroll_btn" data-anchor="" data-v-c0707db4>Rules</button></div></div>',2)),(0,f.R1)(t).isKeplrConnected?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.Lk)("div",b,[(0,a.Lk)("div",w,[(0,a.Lk)("div",g,(0,h.v_)((0,f.R1)(t).user.delegated_tokens_after_snapshot)+" "+(0,h.v_)((0,f.R1)(t).currentNetwork.symbol),1),o[2]||(o[2]=(0,a.Lk)("div",{class:"label"},"Staked",-1))]),(0,a.Lk)("div",C,[(0,a.Lk)("span",null,(0,h.v_)((0,f.R1)(t).user.tickets_number),1),o[3]||(o[3]=(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"29",height:"23",viewBox:"0 0 29 23",fill:"none"},[(0,a.Lk)("path",{d:"M19.691 18.4L14.5 15.0938L9.309 18.4L10.875 12.4775L6.1045 8.625L12.267 8.25125L14.5 2.5875L16.733 8.25125L22.8955 8.625L18.125 12.4775M26.1 11.5C26.1 10.7375 26.4055 10.0062 26.9494 9.46707C27.4932 8.9279 28.2309 8.625 29 8.625V2.875C29 2.1125 28.6945 1.38123 28.1506 0.842068C27.6068 0.302901 26.8691 0 26.1 0H2.9C2.13087 0 1.39325 0.302901 0.84939 0.842068C0.305535 1.38123 0 2.1125 0 2.875V8.625C0.769128 8.625 1.50675 8.9279 2.05061 9.46707C2.59447 10.0062 2.9 10.7375 2.9 11.5C2.9 12.2625 2.59447 12.9938 2.05061 13.5329C1.50675 14.0721 0.769128 14.375 0 14.375V20.125C0 20.8875 0.305535 21.6188 0.84939 22.1579C1.39325 22.6971 2.13087 23 2.9 23H26.1C26.8691 23 27.6068 22.6971 28.1506 22.1579C28.6945 21.6188 29 20.8875 29 20.125V14.375C28.2309 14.375 27.4932 14.0721 26.9494 13.5329C26.4055 12.9938 26.1 12.2625 26.1 11.5Z",fill:"currentColor"})],-1))])]),(0,a.Lk)("div",m,[o[4]||(o[4]=(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"24",viewBox:"0 0 26 24",fill:"none"},[(0,a.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 4C1.79086 4 0 5.79086 0 8V16C0 18.2091 1.79086 20 4 20H16C18.2091 20 20 18.2091 20 16V8C20 5.79086 18.2091 4 16 4H4ZM4 7C3.44772 7 3 7.44772 3 8C3 8.55228 3.44772 9 4 9H8C8.55228 9 9 8.55228 9 8C9 7.44772 8.55228 7 8 7H4Z",fill:"currentColor"}),(0,a.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M23 9C24.6569 9 26 10.3431 26 12C26 13.6569 24.6569 15 23 15H21.4545C21.2035 15 21 14.7965 21 14.5455V9.45455C21 9.20351 21.2035 9 21.4545 9H23ZM24 13C23.4477 13 23 12.5523 23 12C23 11.4477 23.4477 11 24 11C24.5523 11 25 11.4477 25 12C25 12.5523 24.5523 13 24 13Z",fill:"currentColor"}),(0,a.Lk)("path",{d:"M16 3H6L12.514 0.557253C13.3843 0.230886 14.3647 0.547125 14.8803 1.32051L16 3Z",fill:"currentColor"})],-1)),(0,a.Lk)("span",null,(0,h.v_)((0,f.R1)(t).user.address.slice(0,5)+"..."+(0,f.R1)(t).user.address.slice(-6)),1)])],64)):((0,a.uX)(),(0,a.CE)("button",{key:0,class:(0,h.C4)(["connect_btn",{process:(0,f.R1)(t).isKeplrConnecting}]),onClick:o[0]||(o[0]=(0,n.D$)((e=>r()),["prevent"]))},o[1]||(o[1]=[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"24",viewBox:"0 0 26 24",fill:"none"},[(0,a.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 8C0 5.79086 1.79086 4 4 4H16C18.2091 4 20 5.79086 20 8H18C15.7909 8 14 9.79086 14 12C14 14.2091 15.7909 16 18 16H20C20 18.2091 18.2091 20 16 20H4C1.79086 20 0 18.2091 0 16V8ZM3 8C3 7.44772 3.44772 7 4 7H8C8.55228 7 9 7.44772 9 8C9 8.55228 8.55228 9 8 9H4C3.44772 9 3 8.55228 3 8Z",fill:"currentColor"}),(0,a.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18 9C16.3431 9 15 10.3431 15 12C15 13.6569 16.3431 15 18 15H21.3636C21.7151 15 22 14.7151 22 14.3636V9.63636C22 9.28491 21.7151 9 21.3636 9H18ZM18 13C18.5523 13 19 12.5523 19 12C19 11.4477 18.5523 11 18 11C17.4477 11 17 11.4477 17 12C17 12.5523 17.4477 13 18 13Z",fill:"currentColor"})],-1),(0,a.Lk)("span",null,"Connect wallet",-1)]),2))])]))}},k=r(71241);const _=(0,k.A)(y,[["__scopeId","data-v-c0707db4"]]);var L=_;const E={class:"main"};var S={__name:"Default",setup(e){return(e,t)=>{const r=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",E,[(0,a.bF)(L),(0,a.bF)(r,null,{default:(0,a.k6)((({Component:e})=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(e)))])),_:1})])}}};const j=S;var A=j;const x={class:"main"};function K(e,t){const r=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",x,[(0,a.bF)(r,null,{default:(0,a.k6)((({Component:e})=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(e)))])),_:1})])}const O={},H=(0,k.A)(O,[["render",K]]);var B=H;const N=[{path:"/",name:"IndexPage",component:()=>r.e(138).then(r.bind(r,55525)),meta:{layout:A,accessDenied:[]}},{path:"/keplr_error",name:"KeplrErrorPage",component:()=>r.e(183).then(r.bind(r,62183)),meta:{layout:B,accessDenied:["with_keplr"]}}],P=(0,s.aE)({history:(0,s.LA)("/"),routes:N});P.beforeResolve(((e,t,r)=>{e.matched.some((e=>{let t=e.meta.accessDenied;if(t.length&&t.includes("without_keplr")&&!window.keplr)return r({name:"KeplrError"}),!1})),r()}));var F=P,M=r(78875);const T=(0,n.Ef)(d),$=(0,o.Ey)();T.use($),T.use(F),T.use(M.Ay),T.mount("#app")},14340:function(e,t,r){"use strict";r.d(t,{o:function(){return s}});r(98992),r(54520);var n=r(30657),o=r(26776);const a=async e=>{let t=s();try{await window.keplr.enable(e),t.Keplr.offlineSinger=await window.getOfflineSignerAuto(e),t.StargateClient=await o.SigningStargateClient.connectWithSigner(t.currentNetwork.rpc_api,t.Keplr.offlineSinger);let r=await t.Keplr.offlineSinger.getAccounts();t.user.address=r[0].address}catch(error){throw error}};var i=a;r(26270),r(54),r(90712)["Buffer"];const s=(0,n.nY)("global",{state:()=>({isKeplrConnected:!1,isKeplrConnecting:!1,isAvailableBalancesGot:!1,isUserInfoGot:!1,Keplr:{},StargateClient:{},availableBalances:[],prizePool:[],user:{},apiURL:"https://api.lottery.bronbro.io",currentNetwork:{name:"Cosmos Hub",lcd_api:"https://lcd.cosmoshub-4.bronbro.io",rpc_api:"https://rpc.cosmoshub-4.bronbro.io",websocket_url:"wss://rpc.cosmoshub-4.bronbro.io:443/websocket",denom:"uatom",symbol:"ATOM",chain_id:"cosmoshub-4",prefix:"cosmos",explorer_link:"https://www.mintscan.io/cosmos/tx/{tx_hash}",alias:"cosmoshub",exponent:6,gas_adjustment:1.6},lottery_id:1,currentTxHash:"",validatorAddress:"cosmosvaloper106yp7zw35wftheyyv9f9pe69t8rteumjrx52jg",addressConfirmationString:"iâ€™m in brottery"}),actions:{async loadPrizePool(){try{const e=await fetch(`/prize_pools/lottery_${this.lottery_id}/index.json`);if(!e.ok)throw new Error("Failed to fetch prize poll JSON. Status: "+e.status);this.prizePool=await e.json()}catch(error){throw error}},async connectKeplr(){try{if(!window.keplr)throw new Error("Keplr is not installed or not available");await i(this.currentNetwork.chain_id),await Promise.all([this.getAvailableBalances(),this.getUserInfo()]),this.isKeplrConnected=!0}catch(error){throw error}},async getAvailableBalances(){this.isAvailableBalancesGot=!1,this.availableBalances=[];try{const e=await fetch(`${this.currentNetwork.lcd_api}/cosmos/bank/v1beta1/balances/${this.user.address}`);if(!e.ok)throw new Error("Failed to fetch available balances. Status: "+e.status);const t=await e.json();t.balances.length&&(this.availableBalances=t.balances.filter((e=>e.amount>0&&e.denom===this.currentNetwork.denom))),this.isAvailableBalancesGot=!0}catch(error){throw error}},async getUserInfo(){this.isUserInfoGot=!1;try{const e=await fetch(`${this.apiURL}/address/${this.user.address}`);if(!e.ok)throw new Error("Failed to fetch user info. Status: "+e.status);const t=await e.json();Object.assign(this.user,t),this.isUserInfoGot=!0}catch(error){throw error}},async registerUser(){try{const e=await fetch(`${this.apiURL}/initial-delegator/${this.user.address}/participate/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:this.user.address,referral_code:this.user.referralCode,pub_key:this.user.signDoc.pub_key,signature:this.user.signDoc.signature})});if(!e.ok)throw new Error("Failed to register user. Status: "+e.status);const t=await e.json();if(!t.is_participate)throw error}catch(error){throw error}},async claimPrize(){try{const e=await fetch(`${this.apiURL}/${this.user.address}/claim-prizes/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:this.user.address})});if(!e.ok){const t=await e.json();throw new Error(`Error ${e.status}: ${t.detail||"Unknown error"}`)}await e.json()}catch(error){throw error}}}})},78982:function(){},47790:function(){},73776:function(){},21638:function(){},92668:function(){},77965:function(){},66089:function(){},79368:function(){},77667:function(){},76447:function(){},64688:function(){},51069:function(){},15340:function(){},79838:function(){}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.m=e,function(){var e=[];r.O=function(t,n,o,a){if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],a=e[u][2];for(var s=!0,c=0;c<n.length;c++)(!1&a||i>=a)&&Object.keys(r.O).every((function(e){return r.O[e](n[c])}))?n.splice(c--,1):(s=!1,a<i&&(i=a));if(s){e.splice(u--,1);var l=o();void 0!==l&&(t=l)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,o,a]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(t,n){return r.f[n](e,t),t}),[]))}}(),function(){r.u=function(e){return"js/"+e+"."+{138:"4b75c7be",183:"1ee4ae2e"}[e]+".js"}}(),function(){r.miniCssF=function(e){return"css/"+e+"."+{138:"d0890993",183:"e54cc163"}[e]+".css"}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="bro_lottery:";r.l=function(n,o,a,i){if(e[n])e[n].push(o);else{var s,c;if(void 0!==a)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+a){s=d;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",t+a),s.src=n),e[n]=[o];var f=function(t,r){s.onerror=s.onload=null,clearTimeout(h);var o=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((function(e){return e(r)})),t)return t(r)},h=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),c&&document.head.appendChild(s)}}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){r.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,n,o,a){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",r.nc&&(i.nonce=r.nc);var s=function(r){if(i.onerror=i.onload=null,"load"===r.type)o();else{var n=r&&r.type,s=r&&r.target&&r.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+n+": "+s+")");c.name="ChunkLoadError",c.code="CSS_CHUNK_LOAD_FAILED",c.type=n,c.request=s,i.parentNode&&i.parentNode.removeChild(i),a(c)}};return i.onerror=i.onload=s,i.href=t,n?n.parentNode.insertBefore(i,n.nextSibling):document.head.appendChild(i),i},t=function(e,t){for(var r=document.getElementsByTagName("link"),n=0;n<r.length;n++){var o=r[n],a=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(a===e||a===t))return o}var i=document.getElementsByTagName("style");for(n=0;n<i.length;n++){o=i[n],a=o.getAttribute("data-href");if(a===e||a===t)return o}},n=function(n){return new Promise((function(o,a){var i=r.miniCssF(n),s=r.p+i;if(t(i,s))return o();e(n,s,null,o,a)}))},o={524:0};r.f.miniCss=function(e,t){var r={138:1,183:1};o[e]?t.push(o[e]):0!==o[e]&&r[e]&&t.push(o[e]=n(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}}(),function(){var e={524:0};r.f.j=function(t,n){var o=r.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var a=new Promise((function(r,n){o=e[t]=[r,n]}));n.push(o[2]=a);var i=r.p+r.u(t),s=new Error,c=function(n){if(r.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var a=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",s.name="ChunkLoadError",s.type=a,s.request=i,o[1](s)}};r.l(i,c,"chunk-"+t,t)}},r.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,a,i=n[0],s=n[1],c=n[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(c)var u=c(r)}for(t&&t(n);l<i.length;l++)a=i[l],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(u)},n=self["webpackChunkbro_lottery"]=self["webpackChunkbro_lottery"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=r.O(void 0,[504],(function(){return r(22827)}));n=r.O(n)})();
//# sourceMappingURL=app.da35a4af.js.map